{"version":3,"sources":["mapLayersModule.js"],"names":[],"mappings":"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","file":"mapLayersModule.js","sourcesContent":["/*eslint-env browser, jquery */\n/*global console, $, ol */\n/**\n * OL3 layers module.\n * @module\n * @external $\n * @external ol\n * @return {Object} Public functions / variables\n */\n/*eslint-disable no-unused-vars*/\nvar mapLayersModule = (function () {\n    /*eslint-enable no-unused-vars*/\n    'use strict';\n\n    var settings = {\n        bingMapsKey: 'Ak-dzM4wZjSqTlzveKz5u0d4IQ4bRzVI309GxmkgSVr1ewS6iPSrOvOKhA-CJlm3',\n        properties: {\n            visible: false,\n            preload: 'Infinity'\n        }\n    };\n\n\n\n    var layers = {};\n\n\n\n    /**\n     * Create a new layer using predefined settings\n     * @public\n     * @param {string} name - Predefined layer (variable name)\n     * @param {Object} [properties] - Layer custom parameters\n     * @return {Object} OL3 layer\n     */\n    var create = function (name, properties) {\n        if (!layers[name]) {\n            console.warn(name + ' layer definition is not defined');\n            return false;\n        }\n        var layer = layers[name]();\n        layer.setProperties(settings.properties);\n        if (properties) {\n            layer.setProperties(properties);\n        }\n        return layer;\n    };\n\n\n\n    /**\n     * Apply a function on (nested) layers\n     * @public\n     * @param {Object} layer - Map object or layer group\n     * @param {function} fn - Function with layer as parameter, to apply to each layer\n     */\n    var treatLayers = function (layer, fn) {\n\n        $.each(layers, function (i, l) {\n            if (l.getLayers()) {\n                treatLayers(l, fn);\n            } else {\n                fn(l);\n            }\n        });\n\n    };\n\n\n\n    /**\n     * Update layer source url from input value\n     * @public\n     * @param {Object} layer - OL3 layer\n     * @param {String} selector - Input id\n     */\n    var inputLayerSource = function (layer, selector) {\n        var $el = $(selector);\n        if ($el && layer) {\n            $el.on('change', function () {\n                var url = $.trim($el.val());\n                if (url) {\n                    layer.setProperties({\n                        visible: true,\n                        source: new ol.source.OSM({\n                            url: url\n                        })\n                    });\n                } else {\n                    layer.setProperties({\n                        visible: false\n                    });\n                }\n            });\n        }\n    };\n\n\n    // Styles ______________________________________________________________________________________\n    /**\n     * Timezones layer style\n     * @see http://openlayers.org/en/v3.4.0/examples/kml-timezones.html\n     * @private\n     */\n    var timezonesStyle = function (feature) { // feature, resolution\n        var offset = 0;\n        var name = feature.get('name'); // e.g. GMT -08:30\n        var match = name.match(/([\\-+]\\d{2}):(\\d{2})$/);\n        if (match) {\n            var hours = parseInt(match[1], 10);\n            var minutes = parseInt(match[2], 10);\n            offset = 60 * hours + minutes;\n        }\n        var date = new Date();\n        var local = new Date(date.getTime() +\n            (date.getTimezoneOffset() + offset) * 60000);\n        // offset from local noon (in hours)\n        var delta = Math.abs(12 - local.getHours() + (local.getMinutes() / 60));\n        if (delta > 12) {\n            delta = 24 - delta;\n        }\n        var opacity = 0.75 * (1 - delta / 12);\n        return [new ol.style.Style({\n            fill: new ol.style.Fill({\n                color: [0x55, 0x55, 0x55, opacity]\n                    //color: [0xff, 0xff, 0x33, opacity]\n            }),\n            stroke: new ol.style.Stroke({\n                color: '#ffffff'\n            })\n        })];\n    };\n\n    // Base layers _________________________________________________________________________________\n    layers.openStreetMap = function () {\n        return new ol.layer.Tile({\n            name: 'openStreetMap',\n            title: 'Road Map<small> (by <a href=\"http://www.openstreetmap.org\">OpenStreetMap</a>)</small>', // (offline)\n            visible: true,\n            type: 'base',\n            source: new ol.source.OSM({\n                // crossOrigin: null,\n                urls: [\n                    'http://a.tile.openstreetmap.org/{z}/{x}/{y}.png'\n                    //'../../Datas/Tiles/osm_mapnik/{z}/{x}/{y}.png'\n                ]\n            })\n        });\n    };\n    layers.openSeaMap = function () {\n        return new ol.layer.Tile({\n            name: 'openSeaMap',\n            title: 'Shipping lanes<small> (by <a href=\"http://www.openseamap.org\">OpenSeaMap</a>)</small>',\n            type: 'base',\n            source: new ol.source.OSM({\n                attributions: [\n                    new ol.Attribution({\n                        html: 'All maps &copy; ' +\n                                '<a href=\"http://www.openseamap.org/\">OpenSeaMap</a>'\n                    }),\n                    ol.source.OSM.ATTRIBUTION\n                ],\n                crossOrigin: null,\n                urls: [\n                    'http://tiles.openseamap.org/seamark/{z}/{x}/{y}.png',\n                    'http://t1.openseamap.org/seamark/{z}/{x}/{y}.png'\n                ]\n            })\n        });\n    };\n    layers.openStreetMapHumanitarian = function () {\n        return new ol.layer.Tile({\n            name: 'openStreetMapHumanitarian',\n            title: 'Humanitarian <small>(by <a href=\"http://www.openstreetmap.org\">OpenStreetMap</a>)</small>',\n            type: 'base',\n            source: new ol.source.OSM({\n                attributions: [\n                    new ol.Attribution({\n                        html: 'All maps &copy; ' +\n                                '<a href=\"http://www.openstreetmap.fr/\">OpenStreetMap</a>'\n                    }),\n                    ol.source.OSM.ATTRIBUTION\n                ],\n                url: 'http://tile-{a-c}.openstreetmap.fr/hot/{z}/{x}/{y}.png'\n            })\n        });\n    };\n    layers.mapquestOSM = function () {\n        return new ol.layer.Tile({\n            name: 'mapquestOSM',\n            title: 'Road map<small> (by <a href=\"http://open.mapquest.com\">MapQuest</a>)</small>',\n            type: 'base',\n            source: new ol.source.MapQuest({\n                layer: 'osm'\n            })\n        });\n    };\n    layers.mapquestSat = function () {\n        return new ol.layer.Tile({\n            name: 'mapquestSat',\n            title: 'Aerial view<small> (by <a href=\"http://open.mapquest.com\">MapQuest</a>)</small>',\n            type: 'base',\n            source: new ol.source.MapQuest({\n                layer: 'sat'\n            })\n        });\n    };\n    // http://thunderforest.com/maps/opencyclemap/\n    layers.openCycleMap = function () {\n        return new ol.layer.Tile({\n            name: 'openCycleMap',\n            title: 'Cycling roads<small> (by <a href=\"http://www.opencyclemap.org\">OpenCycleMap</a>)</small>',\n            type: 'base',\n            source: new ol.source.OSM({\n                attributions: [\n                    new ol.Attribution({\n                        html: 'All maps &copy; ' +\n                                '<a href=\"http://www.opencyclemap.org/\">OpenCycleMap</a>'\n                    }),\n                    ol.source.OSM.ATTRIBUTION\n                ],\n                url: 'http://{a-c}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png'\n            })\n        });\n    };\n    // http://thunderforest.com/maps/transport/\n    layers.thunderforestTransport = function () {\n        return new ol.layer.Tile({\n            name: 'thunderforestTransport',\n            title: 'Transports<small> (by <a href=\"http://www.thunderforest.com\">ThunderForest</a>)</small>',\n            type: 'base',\n            source: new ol.source.OSM({\n                attributions: [\n                    new ol.Attribution({\n                        html: 'All maps &copy; ' +\n                                '<a href=\"http://www.thunderforest.com/\">ThunderForest</a>'\n                    }),\n                    ol.source.OSM.ATTRIBUTION\n                ],\n                url: 'http://{a-c}.tile.thunderforest.com/transport/{z}/{x}/{y}.png'\n            })\n        });\n    };\n    // http://thunderforest.com/maps/transport-dark/\n    layers.thunderforestTransportDark = function () {\n        return new ol.layer.Tile({\n            name: 'thunderforestTransportDark',\n            title: 'Transport dark<small> (by <a href=\"http://www.thunderforest.com\">ThunderForest</a>)</small>',\n            type: 'base',\n            source: new ol.source.OSM({\n                attributions: [\n                    new ol.Attribution({\n                        html: 'All maps &copy; ' +\n                                '<a href=\"http://www.thunderforest.com/\">ThunderForest</a>'\n                    }),\n                    ol.source.OSM.ATTRIBUTION\n                ],\n                url: 'https://{a-c}.tile.thunderforest.com/transport-dark/{z}/{x}/{y}.png'\n            })\n        });\n    };\n    // http://thunderforest.com/maps/landscape/\n    layers.thunderforestLandscape = function () {\n        return new ol.layer.Tile({\n            name: 'thunderforestLandscape',\n            title: 'Landscape<small> (by <a href=\"http://www.thunderforest.com\">ThunderForest</a>)</small>',\n            type: 'base',\n            source: new ol.source.OSM({\n                attributions: [\n                    new ol.Attribution({\n                        html: 'All maps &copy; ' +\n                                '<a href=\"http://www.thunderforest.com/\">ThunderForest</a>'\n                    }),\n                    ol.source.OSM.ATTRIBUTION\n                ],\n                url: 'https://{a-c}.tile.thunderforest.com/landscape/{z}/{x}/{y}.png'\n            })\n        });\n    };\n    // http://thunderforest.com/maps/outdoors/\n    layers.thunderforestOutdoor = function () {\n        return new ol.layer.Tile({\n            name: 'thunderforestOutdoor',\n            title: 'Outdoor activities<small> (by <a href=\"http://www.thunderforest.com\">ThunderForest</a>)</small>',\n            type: 'base',\n            source: new ol.source.OSM({\n                attributions: [\n                    new ol.Attribution({\n                        html: 'All maps &copy; ' +\n                                '<a href=\"http://www.thunderforest.com/\">ThunderForest</a>'\n                    }),\n                    ol.source.OSM.ATTRIBUTION\n                ],\n                url: 'https://{a-c}.tile.thunderforest.com/outdoors/{z}/{x}/{y}.png'\n            })\n        });\n    };\n    layers.arcgis = function () {\n        return new ol.layer.Tile({\n            name: 'arcgis',\n            title: 'Terrain<small> (by <a href=\"http://services.arcgisonline.com\">ArcGIS</a>)</small>',\n            type: 'base',\n            source: new ol.source.XYZ({\n                crossOrigin: 'anonymous', // Important\n                attributions: [\n                    new ol.Attribution({\n                        html: 'Tiles &copy; <a href=\"http://services.arcgisonline.com/ArcGIS/' +\n                                'rest/services/World_Topo_Map/MapServer\">ArcGIS</a>'\n                    })\n                ],\n                url: 'http://server.arcgisonline.com/ArcGIS/rest/services/' +\n                        'World_Topo_Map/MapServer/tile/{z}/{y}/{x}'\n            })\n        });\n    };\n    layers.arcgisRestHighwayUSA = function () {\n        return new ol.layer.Tile({\n            name: 'arcgisRestHighwayUSA',\n            title: 'Highway USA<small> (by <a href=\"http://services.arcgisonline.com\">ArcGIS</a>)</small>',\n            type: 'base',\n            extent: [-13884991, 2870341, -7455066, 6338219],\n            source: new ol.source.TileArcGISRest({\n                url: 'http://sampleserver1.arcgisonline.com/ArcGIS/rest/services/Specialty/' + 'ESRI_StateCityHighway_USA/MapServer'\n            })\n        });\n    };\n    layers.googleTerrain = function () {\n        return new ol.layer.Tile({\n            name: 'googleTerrain',\n            title: 'Terrain + labels<small> (by <a href=\"http://www.google.com/maps/\">Google</a>)</small>',\n            type: 'base',\n            source: new ol.source.XYZ({\n                crossOrigin: 'anonymous', // Important\n                url: 'http://mts0.google.com/maps//vt/lyrs=t@132,r@285000000&hl=en&src=app&x={x}&y={y}&z={z}&s=1'\n            })\n        });\n    };\n    layers.googleSatellite = function () {\n        return new ol.layer.Tile({\n            name: 'googleSatellite',\n            title: 'Aerial view<small> (by <a href=\"http://www.google.com/maps/\">Google</a>)</small>',\n            type: 'base',\n            source: new ol.source.XYZ({\n                crossOrigin: 'anonymous', // Important\n                //resolutions: [9784, 2446, 1223, 76.44, 9.55, 2.39],\n                url: 'http://khms0.google.com/maps//kh/v=165&src=app&x={x}&y={y}&z={z}&s=1'\n            })\n        });\n    };\n    layers.bingRoad = function () {\n        return new ol.layer.Tile({\n            name: 'bingRoad',\n            title: 'Road map<small> (by <a href=\"http://www.bing.com/maps/\">Bing</a>)</small>',\n            type: 'base',\n            maxZoom: 19,\n            source: new ol.source.BingMaps({\n                key: settings.bingMapsKey,\n                imagerySet: 'Road'\n            })\n        });\n    };\n    layers.bingAerial = function () {\n        return new ol.layer.Tile({\n            name: 'bingAerial',\n            title: 'Aerial view<small> (by <a href=\"http://www.bing.com/maps/\">Bing</a>)</small>',\n            type: 'base',\n            maxZoom: 19,\n            source: new ol.source.BingMaps({\n                key: settings.bingMapsKey,\n                imagerySet: 'Aerial'\n            })\n        });\n    };\n    layers.bingAerialWithLabels = function () {\n        return new ol.layer.Tile({\n            name: 'bingAerialWithLabels',\n            title: 'Aerial view with labels<small> (by <a href=\"http://www.bing.com/maps/\">Bing</a>)</small>',\n            type: 'base',\n            maxZoom: 19,\n            source: new ol.source.BingMaps({\n                key: settings.bingMapsKey,\n                imagerySet: 'AerialWithLabels'\n            })\n        });\n    };\n    layers.bingCollinsBart = function () {\n        return new ol.layer.Tile({\n            name: 'bingCollinsBart',\n            title: 'CollinsBart<small> (by <a href=\"http://www.bing.com/maps/\">Bing</a>)</small>',\n            type: 'base',\n            maxZoom: 19,\n            source: new ol.source.BingMaps({\n                key: settings.bingMapsKey,\n                imagerySet: 'collinsBart'\n            })\n        });\n    };\n    layers.bingOrdnanceSurvey = function () {\n        return new ol.layer.Tile({\n            name: 'bingOrdnanceSurvey',\n            title: 'OrdnanceSurvey<small> (by <a href=\"http://www.bing.com/maps/\">Bing</a>)</small>',\n            type: 'base',\n            maxZoom: 19,\n            source: new ol.source.BingMaps({\n                key: settings.bingMapsKey,\n                imagerySet: 'ordnanceSurvey'\n            })\n        });\n    };\n    // Stamen\n    // http://maps.stamen.com/#watercolor/12/37.7706/-122.3782\n    // toner toner-hybrid toner-labels toner-lines toner-background toner-lite\n    layers.stamenToner = function () {\n        return new ol.layer.Tile({\n            name: 'stamenToner',\n            title: 'B&W map<small> (by <a href=\"http://maps.stamen.com\">Stamen</a>)</small>',\n            type: 'base',\n            source: new ol.source.Stamen({\n                layer: 'toner'\n            })\n        });\n    };\n    layers.stamenTonerLite = function () {\n        return new ol.layer.Tile({\n            name: 'stamenTonerLite',\n            title: 'Gray scale map<small> (by <a href=\"http://maps.stamen.com\">Stamen</a>)</small>',\n            type: 'base',\n            source: new ol.source.Stamen({\n                layer: 'toner-lite'\n            })\n        });\n    };\n    layers.stamenTonerBackground = function () {\n        return new ol.layer.Tile({\n            name: 'stamenTonerBackground',\n            title: 'B&W background<small> (by <a href=\"http://maps.stamen.com\">Stamen</a>)</small>',\n            type: 'base',\n            source: new ol.source.Stamen({\n                layer: 'toner-background'\n            })\n        });\n    };\n    layers.stamenWatercolor = function () {\n        return new ol.layer.Tile({\n            name: 'stamenWatercolor',\n            title: 'Watercolor map<small> (by <a href=\"http://maps.stamen.com\">Stamen</a>)</small>',\n            type: 'base',\n            source: new ol.source.Stamen({\n                layer: 'watercolor'\n            })\n        });\n    };\n    // terrain terrain-labels terrain-lines terrain-background\n    layers.stamenTerrain = function () {\n        return new ol.layer.Tile({\n            name: 'stamenTerrain',\n            title: 'Terrain USA<small> (by <a href=\"http://maps.stamen.com\">Stamen</a>)</small>',\n            type: 'base',\n            source: new ol.source.Stamen({\n                layer: 'terrain'\n            })\n        });\n    };\n    layers.stamenTerrainWithLabels = function () {\n        return new ol.layer.Tile({\n            name: 'stamenTerrainLabels',\n            title: 'Terrain + labels USA<small> (by <a href=\"http://maps.stamen.com\">Stamen</a>)</small>',\n            type: 'base',\n            source: new ol.source.Stamen({\n                layer: 'terrain-labels'\n            })\n        });\n    };\n    layers.customBaseLayer = function () {\n        return new ol.layer.Tile({\n            name: 'customBaseLayer',\n            title: 'Custom',\n            type: 'base'/*,\n            source: new ol.source.OSM({\n                url: ''\n            })*/\n        });\n    };\n    /*\n    // Err\n    layers.stamenBurningMap = function () {\n    return new ol.layer.Tile({\n        name: 'stamenBurningMap',\n        title: 'Burning map<small> (by <a href=\"http://maps.stamen.com\">Stamen</a>)</small>',\n        type: 'base',\n        source: new ol.source.Stamen({\n            layer: 'burningmap'\n        })\n    });\n    };\n    // Err\n    layers.stamenMars = function () {\n    return new ol.layer.Tile({\n        name: 'stamenMars',\n        title: 'Mars<small> (by <a href=\"http://maps.stamen.com\">Stamen</a>)</small>',\n        type: 'base',\n        source: new ol.source.Stamen({\n            layer: 'mars'\n        })\n    });\n    };\n    // Err\n    layers.stamenTreesCabsCrime = function () {\n    return new ol.layer.Tile({\n        name: 'stamenTreesCabsCrime',\n        title: 'Trees Cabs Crime<small> (by <a href=\"http://maps.stamen.com\">Stamen</a>)</small>',\n        type: 'base',\n        source: new ol.source.Stamen({\n            layer: 'trees-cabs-crime'\n        })\n    });\n    };\n    */\n    // Overlays ____________________________________________________________________________________\n    layers.googleBike = function () {\n        return new ol.layer.Tile({\n            name: 'googleBike',\n            title: 'Cycling roads<small> (by <a href=\"http://www.google.com/maps/\">Google</a>)</small>',\n            visible: true,\n            opacity: 1,\n            source: new ol.source.XYZ({\n                //attributions: [\n                //  new ol.Attribution({\n                //    html: 'Map data &copy; <a href=\"http://www.openstreetmap.org/\">OpenStreetMap</a> and contributors <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>'\n                //  }),\n                //  ol.source.OSM.ATTRIBUTION\n                //],\n                crossOrigin: 'anonymous',\n                url: 'http://mts0.google.com/maps//vt/lyrs=h@239000000,bike&hl=en&src=app&x={x}&y={y}&z={z}&s=1'\n            })\n        });\n    };\n    layers.mapquestHyb = function () {\n        return new ol.layer.Tile({\n            name: 'mapquestHyb',\n            title: 'City names<small> (by <a href=\"http://open.mapquest.com\">MapQuest</a>)</small>',\n            source: new ol.source.MapQuest({\n                layer: 'hyb'\n            })\n        });\n    };\n    layers.lonviaCycling = function () {\n        return new ol.layer.Tile({\n            name: 'lonviaCycling',\n            title: 'Cycling roads<small> (by <a href=\"http://www.waymarkedtrails.org\">Lonvia</a>)</small>',\n            opacity: 0.7,\n            source: new ol.source.OSM({\n                attributions: [\n                    new ol.Attribution({\n                        html: 'Map data &copy; <a href=\"http://www.openstreetmap.org/\">OpenStreetMap</a> and contributors <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>'\n                    }),\n                    ol.source.OSM.ATTRIBUTION\n                ],\n                crossOrigin: null,\n                url: 'http://tile.lonvia.de/cycling/{z}/{x}/{y}.png'\n                    // urls: [\n                    //  'http://tile.waymarkedtrails.org/cycling/{z}/{x}/{y}.png',\n                    //  'http://tile.lonvia.de/cycling/{z}/{x}/{y}.png',\n                    //  '../../Datas/Tiles/lonvia_cycling/{z}/{x}/{y}.png'\n                    // ]\n            })\n        });\n    };\n    layers.lonviaHiking = function () {\n        return new ol.layer.Tile({\n            name: 'lonviaHiking',\n            title: 'Hiking paths<small> (by <a href=\"http://www.waymarkedtrails.org\">Lonvia</a>)</small>',\n            opacity: 0.7,\n            source: new ol.source.OSM({\n                attributions: [\n                    new ol.Attribution({\n                        html: 'Map data &copy; <a href=\"http://www.openstreetmap.org/\">OpenStreetMap</a> and contributors <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>'\n                    }),\n                    ol.source.OSM.ATTRIBUTION\n                ],\n                crossOrigin: null,\n                url: 'http://tile.lonvia.de/hiking/{z}/{x}/{y}.png'\n            })\n        });\n    };\n    layers.stamenTonerHybrid = function () {\n        return new ol.layer.Tile({\n            name: 'stamenTonerHybrid',\n            title: 'B&W roads + labels<small> (by <a href=\"http://maps.stamen.com\">Stamen</a>)</small>',\n            source: new ol.source.Stamen({\n                layer: 'toner-hybrid'\n            })\n        });\n    };\n    layers.stamenTonerLabels = function () {\n        return new ol.layer.Tile({\n            name: 'stamenTonerLabels',\n            title: 'B&W labels<small> (by <a href=\"http://maps.stamen.com\">Stamen</a>)</small>',\n            source: new ol.source.Stamen({\n                layer: 'toner-labels'\n            })\n        });\n    };\n    layers.stamenTonerLines = function () {\n        return new ol.layer.Tile({\n            name: 'stamenTonerLines',\n            title: 'B&W roads<small> (by <a href=\"http://maps.stamen.com\">Stamen</a>)</small>',\n            source: new ol.source.Stamen({\n                layer: 'toner-lines'\n            })\n        });\n    };\n\n\n\n    /**\n     *\n     */\n    var ImageData = function () {\n        console.warm('ImageData function in development');\n    };\n\n\n\n    /**\n     * Generates a shaded relief image given elevation data.  Uses a 3x3\n     * neighborhood for determining slope and aspect.\n     * @private\n     * @param {Array.<ImageData>} inputs Array of input images.\n     * @param {Object} data Data added in the \"beforeoperations\" event.\n     * @return {ImageData} Output image.\n     */\n    var shade = function (inputs, data) {\n      var elevationImage = inputs[0];\n      var width = elevationImage.width;\n      var height = elevationImage.height;\n      var elevationData = elevationImage.data;\n      var shadeData = new Uint8ClampedArray(elevationData.length);\n      var dp = data.resolution * 2;\n      var maxX = width - 1;\n      var maxY = height - 1;\n      var pixel = [0, 0, 0, 0];\n      var twoPi = 2 * Math.PI;\n      var halfPi = Math.PI / 2;\n      var sunEl = Math.PI * data.sunEl / 180;\n      var sunAz = Math.PI * data.sunAz / 180;\n      var cosSunEl = Math.cos(sunEl);\n      var sinSunEl = Math.sin(sunEl);\n      var pixelX, pixelY, x0, x1, y0, y1, offset,\n          z0, z1, dzdx, dzdy, slope, aspect, cosIncidence, scaled;\n      for (pixelY = 0; pixelY <= maxY; ++pixelY) {\n        y0 = pixelY === 0 ? 0 : pixelY - 1;\n        y1 = pixelY === maxY ? maxY : pixelY + 1;\n        for (pixelX = 0; pixelX <= maxX; ++pixelX) {\n          x0 = pixelX === 0 ? 0 : pixelX - 1;\n          x1 = pixelX === maxX ? maxX : pixelX + 1;\n          // determine elevation for (x0, pixelY)\n          offset = (pixelY * width + x0) * 4;\n          pixel[0] = elevationData[offset];\n          pixel[1] = elevationData[offset + 1];\n          pixel[2] = elevationData[offset + 2];\n          pixel[3] = elevationData[offset + 3];\n          z0 = data.vert * (pixel[0] + pixel[1] * 2 + pixel[2] * 3);\n          // determine elevation for (x1, pixelY)\n          offset = (pixelY * width + x1) * 4;\n          pixel[0] = elevationData[offset];\n          pixel[1] = elevationData[offset + 1];\n          pixel[2] = elevationData[offset + 2];\n          pixel[3] = elevationData[offset + 3];\n          z1 = data.vert * (pixel[0] + pixel[1] * 2 + pixel[2] * 3);\n          dzdx = (z1 - z0) / dp;\n          // determine elevation for (pixelX, y0)\n          offset = (y0 * width + pixelX) * 4;\n          pixel[0] = elevationData[offset];\n          pixel[1] = elevationData[offset + 1];\n          pixel[2] = elevationData[offset + 2];\n          pixel[3] = elevationData[offset + 3];\n          z0 = data.vert * (pixel[0] + pixel[1] * 2 + pixel[2] * 3);\n          // determine elevation for (pixelX, y1)\n          offset = (y1 * width + pixelX) * 4;\n          pixel[0] = elevationData[offset];\n          pixel[1] = elevationData[offset + 1];\n          pixel[2] = elevationData[offset + 2];\n          pixel[3] = elevationData[offset + 3];\n          z1 = data.vert * (pixel[0] + pixel[1] * 2 + pixel[2] * 3);\n          dzdy = (z1 - z0) / dp;\n          slope = Math.atan(Math.sqrt(dzdx * dzdx + dzdy * dzdy));\n          aspect = Math.atan2(dzdy, -dzdx);\n          if (aspect < 0) {\n            aspect = halfPi - aspect;\n          } else if (aspect > halfPi) {\n            aspect = twoPi - aspect + halfPi;\n          } else {\n            aspect = halfPi - aspect;\n          }\n          cosIncidence = sinSunEl * Math.cos(slope) +\n              cosSunEl * Math.sin(slope) * Math.cos(sunAz - aspect);\n          offset = (pixelY * width + pixelX) * 4;\n          scaled = 255 * cosIncidence;\n          shadeData[offset] = scaled;\n          shadeData[offset + 1] = scaled;\n          shadeData[offset + 2] = scaled;\n          shadeData[offset + 3] = elevationData[offset + 3];\n        }\n      }\n      return new ImageData(shadeData, width, height);\n    };\n\n    layers.mapboxShadedRelief = function () {\n        return new ol.layer.Image({\n            name: 'mapboxShadedRelief',\n            title: 'Shaded relief<small> (by <a href=\"http://www.mapbox.com\">Mapbox</a>)</small>',\n            source: new ol.source.Raster({\n                sources: [\n                    new ol.source.XYZ({\n                        url: 'https://{a-d}.tiles.mapbox.com/v3/aj.sf-dem/{z}/{x}/{y}.png',\n                        crossOrigin: 'anonymous'\n                    })\n                ],\n                operationType: 'image',\n                operation: shade\n            }),\n            opacity: 0.3\n        });\n    };\n    // See http://openlayers.org/en/v3.4.0/examples/kml-timezones.html\n    layers.timeZones = function () {\n        return new ol.layer.Vector({\n            name: 'timeZones',\n            title: 'Time zones',\n            style: timezonesStyle,\n            minResolution: 4891,\n            source: new ol.source.Vector({\n                    extractStyles: false,\n                    projection: 'EPSG:3857',\n                    url: 'data/kml/timezones.kml',\n                    format: new ol.format.KML()\n                })\n                //source: new ol.source.Vector({\n                //    url: 'data/kml/timezones.kml',\n                //    format: new ol.format.KML({\n                //        extractStyles: false\n                //    })\n                //})\n        });\n    };\n    layers.gpxFile = function () {\n        return new ol.layer.Vector({\n            name: 'gpxFile',\n            title: 'GPS tracks',\n            visible: false,\n            source: new ol.source.Vector({\n            }),\n            style: new ol.style.Style({\n                stroke: new ol.style.Stroke({\n                    color: 'rgba(51, 122, 183, 0.7)',\n                    width: 3\n                })\n            })\n        });\n    };\n\n    layers.drawingVector = function () {\n        return new ol.layer.Tile({\n            name: 'drawing',\n            title: 'My drawings'\n            // ,\n            //    source: new ol.source.MapQuest({layer: 'sat'})\n        });\n    };\n    layers.customOverlay = function () {\n        return new ol.layer.Tile({\n            name: 'customOverlay',\n            title: 'Custom'/*,\n            source: new ol.source.OSM({\n                url: ''\n            })*/\n        });\n    };\n    /*\n    layers.toolserverHillShading = function () {\n    return new ol.layer.Tile({\n        name: 'toolserverHillShading',\n        title: 'Toolserver hill shading',\n        minZoom: 2,\n        maxZoom: 15,\n        source: new ol.source.XYZ({\n            // crossOrigin: null,\n            urls: [\n                // 'http://toolserver.org/~cmarqu/hill/{z}/{x}/{y}.png',\n                'http://a.tiles.wmflabs.org/hillshading/{z}/{x}/{y}.png',\n                'http://b.tiles.wmflabs.org/hillshading/{z}/{x}/{y}.png',\n                'http://c.tiles.wmflabs.org/hillshading/{z}/{x}/{y}.png'\n            ]\n        })\n    });\n    };\n    */\n    //layers.grid = function () {\n    //return new ol.layer.Tile({\n    //  name: 'gridLayer',\n    //  title: 'Country data',\n    //  style: 'Grid',\n    //  // visible: false,\n    //  source: sources.grid\n    //});\n    //};\n    // if (map && map.getView()) {\n    //    map.addLayer(scoresLayer);\n    // } else {\n    //    userOverlays.push(scoresLayer);\n    // }\n\n    // _____________________________________________________________________________________________\n\n    /**\n     * Update layer source url from a file input\n     * <input id=\"gpx_file\" type=\"file\" accept=\".gpx\" />\n     * @see {@link http://www.html5rocks.com/en/tutorials/file/dndfiles/}\n     * @public\n     * @param {string} selector - File input ID\n     * @param {Object} layer - OL3 vector layer\n     */\n    /*\n    var GPXFileSource = function (selector, layer) {\n        if (!(window.File && window.FileReader && window.FileList && window.Blob)) {\n            $(selector).addClass('disabled');\n            console.warn('The File APIs are not fully supported by your browser.');\n            return false;\n        }\n        var gpxFormat = new ol.format.GPX();\n        var gpxFeatures;\n\n        var $filePath = $(selector);\n        $filePath.on('change', function (e) {\n\n            var files = e.target.files;\n            var output = [];\n            for (var i = 0, f; f = files[i]; i++) {\n                var reader = new FileReader();\n                reader.readAsText(f); //, 'UTF-8'\n                //reader.readAsDataURL(f);\n\n                reader.onload = function (e) {\n\n                    gpxFeatures = gpxFormat.readFeatures(e.target.result, {\n                        dataProjection: 'EPSG:4326',\n                        featureProjection: 'EPSG:3857'\n                    });\n                    layer.getSource().addFeatures(gpxFeatures);\n\n                    layer.setProperties({\n                        visible: true\n                    });\n\n                };\n\n                reader.onloadstart = function (e) {\n                    //console.log('GPX tracks loading...');\n                };\n                reader.onloadend = function (e) {\n                    console.log('GPX tracks loaded');\n                };\n                reader.onerror = function (e) {\n                    swal({title: 'Oups!', text: 'An error occured while trying to read your file.', type: 'warning'});\n                };\n\n                // Build the list of loaded files\n                output.push('<li class=\"list-group-item\">'\n                + escape(f.name) + ' <span class=\"badge\">'\n                + formatBytes(f.size)\n                + (' ' + f.type || '')\n                //+ (f.lastModifiedDate ? ' last modified: ' + f.lastModifiedDate.toLocaleDateString() : '')\n                + '<span></li>');\n            };\n\n            var $list = $(selector + '_list');\n            if ($list) {\n                $list.html('<ul class=\"list-group\">' + output.join('') + '</ul>');\n            }\n        });\n    };\n    */\n\n\n\n    // Set default properties\n    /*$.each(layers, function (i, layer) {\n        layer().setProperties(defaultProperties);\n    });*/\n    /*\n    // Translate layer and group titles once i18next plugin initialized\n    $.when(deferred.init.i18next).done(function () {\n        roadBaselayers.setProperties({\n            title: $.t('sections:roadLayers.title')\n        });\n        reliefBaselayers.setProperties({\n            title: $.t('sections:roadWithReliefLayers.title')\n        });\n        aerialBaselayers.setProperties({\n            title: $.t('sections:satelliteLayers.title')\n        });\n        baselayers.setProperties({\n            title: $.t('sections:baseLayer.title')\n        });\n        roadOverlays.setProperties({\n            title: $.t('sections:roadLayers.title')\n        });\n        informationOverlays.setProperties({\n            title: $.t('sections:infoLayers.title')\n        });\n        //terrainOverlays.setProperties({\n        //    title: $.t('sections:reliefLayers.title')\n        //});\n        userOverlays.setProperties({\n            title: $.t('sections:myLayers.title')\n        });\n        overlays.setProperties({\n            title: $.t('sections:layers.title')\n        });\n        informationOverlays.setProperties({\n            title: $.t('sections:infoLayers.title')\n        });\n        console.log('Map layers translated');\n    });\n    */\n\n\n\n    return {\n        create: create,\n        inputLayerSource: inputLayerSource,\n        treatLayers: treatLayers\n    };\n\n})();\n"],"sourceRoot":"/source/"}