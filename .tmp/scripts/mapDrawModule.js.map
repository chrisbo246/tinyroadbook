{"version":3,"sources":["mapDrawModule.js"],"names":["mapDrawModule","draw","features","ol","Collection","modify","interaction","Modify","deleteCondition","event","events","condition","shiftKeyOnly","singleClick","featureOverlay","layer","Vector","source","style","Style","fill","Fill","color","stroke","Stroke","width","image","Circle","radius","init","map","setMap","addInteraction","drawInteraction","type","Draw","addDrawTypeSwitcher","id","typeSelect","document","getElementById","onchange","removeInteraction","value"],"mappings":";;AAAA;AACA;AACA;;;;;;AAMA;AACA,IAAIA,gBAAiB,YAAY;AAC7B;AACA;;AAEA,QAAIC,IAAJ;AACA,QAAIC,WAAW,IAAIC,GAAGC,UAAP,EAAf;;AAIA;;;AAGA,QAAIC,SAAS,IAAIF,GAAGG,WAAH,CAAeC,MAAnB,CAA0B;AACnCL,kBAAUA,QADyB;AAEnC;AACA;AACA;AACAM,yBAAiB,yBAAUC,KAAV,EAAiB;AAC9B,mBAAON,GAAGO,MAAH,CAAUC,SAAV,CAAoBC,YAApB,CAAiCH,KAAjC,KACPN,GAAGO,MAAH,CAAUC,SAAV,CAAoBE,WAApB,CAAgCJ,KAAhC,CADA;AAEH;AARkC,KAA1B,CAAb;;AAaA;;;AAGA,QAAIK,iBAAiB,IAAIX,GAAGY,KAAH,CAASC,MAAb,CAAoB;AACrCC,gBAAQ,IAAId,GAAGc,MAAH,CAAUD,MAAd,CAAqB;AACzBd,sBAAUA;AADe,SAArB,CAD6B;AAIrCgB,eAAO,IAAIf,GAAGe,KAAH,CAASC,KAAb,CAAmB;AACtBC,kBAAM,IAAIjB,GAAGe,KAAH,CAASG,IAAb,CAAkB;AACpBC,uBAAO;AADa,aAAlB,CADgB;AAItBC,oBAAQ,IAAIpB,GAAGe,KAAH,CAASM,MAAb,CAAoB;AACxBF,uBAAO,SADiB;AAExBG,uBAAO;AAFiB,aAApB,CAJc;AAQtBC,mBAAO,IAAIvB,GAAGe,KAAH,CAASS,MAAb,CAAoB;AACvBC,wBAAQ,CADe;AAEvBR,sBAAM,IAAIjB,GAAGe,KAAH,CAASG,IAAb,CAAkB;AACpBC,2BAAO;AADa,iBAAlB;AAFiB,aAApB;AARe,SAAnB;AAJ8B,KAApB,CAArB;;AAuBA;;;;;AAKA,QAAIO,OAAO,SAAPA,IAAO,CAAUC,GAAV,EAAe;AACtBhB,uBAAeiB,MAAf,CAAsBD,GAAtB;AACAA,YAAIE,cAAJ,CAAmB3B,MAAnB;AACH,KAHD;;AAOA;;;;;;AAMA,QAAI4B,kBAAkB,SAAlBA,eAAkB,CAAUC,IAAV,EAAgBJ,GAAhB,EAAqB;AACvC,YAAII,IAAJ,EAAU;AACNjC,mBAAO,IAAIE,GAAGG,WAAH,CAAe6B,IAAnB,CAAwB;AAC3BjC,0BAAUA,QADiB;AAE3BgC,sBAAM,mCAAqCA;AAFhB,aAAxB,CAAP;AAIAJ,gBAAIE,cAAJ,CAAmB/B,IAAnB;AACH;AACJ,KARD;;AAYA;;;;;;AAMA,QAAImC,sBAAsB,SAAtBA,mBAAsB,CAAUC,EAAV,EAAcP,GAAd,EAAmB;AACzC,YAAIQ,aAAaC,SAASC,cAAT,CAAwBH,EAAxB,CAAjB;AACAC,mBAAWG,QAAX,GAAsB,YAAY;AAC9BX,gBAAIY,iBAAJ,CAAsBzC,IAAtB;AACAgC,4BAAgBK,WAAWK,KAA3B,EAAkCb,GAAlC;AACH,SAHD;AAIAG,wBAAgBK,WAAWK,KAA3B,EAAkCb,GAAlC;AACH,KAPD;;AAWA,WAAO;AACHD,cAAMA,IADH;AAEHI,yBAAiBA,eAFd;AAGHG,6BAAqBA;AAHlB,KAAP;AAMH,CAxGmB,EAApB","file":"mapDrawModule.js","sourcesContent":["/*eslint-env browser, jquery */\r\n/*global ol */\r\n/**\r\n* OL3 draw module.\r\n* @module\r\n* @external ol\r\n* @return {Object} Public functions / variables\r\n*/\r\n/*eslint-disable no-unused-vars*/\r\nvar mapDrawModule = (function () {\r\n    /*eslint-enable no-unused-vars*/\r\n    'use strict';\r\n\r\n    var draw;\r\n    var features = new ol.Collection();\r\n\r\n\r\n\r\n    /**\r\n    * Modify interaction\r\n    */\r\n    var modify = new ol.interaction.Modify({\r\n        features: features,\r\n        // the SHIFT key must be pressed to delete vertices, so\r\n        // that new vertices can be drawn at the same position\r\n        // of existing vertices\r\n        deleteCondition: function (event) {\r\n            return ol.events.condition.shiftKeyOnly(event) &&\r\n            ol.events.condition.singleClick(event);\r\n        }\r\n    });\r\n\r\n\r\n\r\n    /**\r\n    * Features vector layer\r\n    */\r\n    var featureOverlay = new ol.layer.Vector({\r\n        source: new ol.source.Vector({\r\n            features: features\r\n        }),\r\n        style: new ol.style.Style({\r\n            fill: new ol.style.Fill({\r\n                color: 'rgba(255, 255, 255, 0.2)'\r\n            }),\r\n            stroke: new ol.style.Stroke({\r\n                color: '#ffcc33',\r\n                width: 2\r\n            }),\r\n            image: new ol.style.Circle({\r\n                radius: 7,\r\n                fill: new ol.style.Fill({\r\n                    color: '#ffcc33'\r\n                })\r\n            })\r\n        })\r\n    });\r\n\r\n\r\n\r\n    /**\r\n    * Add the draw interaction to the map\r\n    * @public\r\n    * @param {Object} map - OL3 map\r\n    */\r\n    var init = function (map) {\r\n        featureOverlay.setMap(map);\r\n        map.addInteraction(modify);\r\n    };\r\n\r\n\r\n\r\n    /**\r\n    * Add a draw interaction to the map\r\n    * @public\r\n    * @param {string} type - Interaction type\r\n    * @param {Object} OL3 map\r\n    */\r\n    var drawInteraction = function (type, map) {\r\n        if (type) {\r\n            draw = new ol.interaction.Draw({\r\n                features: features,\r\n                type: /** @type {ol.geom.GeometryType} */ (type)\r\n            });\r\n            map.addInteraction(draw);\r\n        }\r\n    };\r\n\r\n\r\n\r\n    /**\r\n    * Let user change the geometry type.\r\n    * @public\r\n    * @param {string} id - Select input ID\r\n    * @param {Object} map - OL3 map\r\n    */\r\n    var addDrawTypeSwitcher = function (id, map) {\r\n        var typeSelect = document.getElementById(id);\r\n        typeSelect.onchange = function () {\r\n            map.removeInteraction(draw);\r\n            drawInteraction(typeSelect.value, map);\r\n        };\r\n        drawInteraction(typeSelect.value, map);\r\n    };\r\n\r\n\r\n\r\n    return {\r\n        init: init,\r\n        drawInteraction: drawInteraction,\r\n        addDrawTypeSwitcher: addDrawTypeSwitcher\r\n    };\r\n\r\n})();\r\n"]}