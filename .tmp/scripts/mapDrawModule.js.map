{"version":3,"sources":["../../app/scripts/mapDrawModule.js"],"names":[],"mappings":";;;;;;;;;;;AASA,IAAI,aAAa,GAAG,CAAC,YAAY;AAC7B,gBAAY,CAAC;;AAEb,QAAI,IAAI,CAAC;;AAET,QAAI,QAAQ,GAAG,IAAI,EAAE,CAAC,UAAU,EAAE,CAAC;;;;;;;AASnC,QAAI,IAAI,GAAG,SAAP,IAAI,CAAa,GAAG,EAAE;AACtB,sBAAc,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;AAC3B,WAAG,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;KAC9B,CAAC;;;;;;;;AAUF,QAAI,eAAe,GAAG,SAAlB,eAAe,CAAa,IAAI,EAAE,GAAG,EAAE;AACvC,YAAI,IAAI,EAAE;AACN,gBAAI,GAAG,IAAI,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC;AAC3B,wBAAQ,EAAE,QAAQ;AAClB,oBAAI,qCAAuC,IAAI,AAAC;aACnD,CAAC,CAAC;AACH,eAAG,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;SAC5B;KACJ,CAAC;;;;;;;;AAUF,QAAI,mBAAmB,GAAG,SAAtB,mBAAmB,CAAa,EAAE,EAAE,GAAG,EAAE;AACzC,YAAI,UAAU,GAAG,QAAQ,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC;AAC7C,kBAAU,CAAC,QAAQ,GAAG,YAAY;AAC9B,eAAG,CAAC,iBAAiB,CAAC,IAAI,CAAC,CAAC;AAC5B,2BAAe,CAAC,UAAU,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;SAC1C,CAAC;AACF,uBAAe,CAAC,UAAU,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;KAC1C,CAAC;;;;;AAOF,QAAI,cAAc,GAAG,IAAI,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC;AACrC,cAAM,EAAE,IAAI,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC;AACzB,oBAAQ,EAAE,QAAQ;SACrB,CAAC;AACF,aAAK,EAAE,IAAI,EAAE,CAAC,KAAK,CAAC,KAAK,CAAC;AACtB,gBAAI,EAAE,IAAI,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC;AACpB,qBAAK,EAAE,0BAA0B;aACpC,CAAC;AACF,kBAAM,EAAE,IAAI,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC;AACxB,qBAAK,EAAE,SAAS;AAChB,qBAAK,EAAE,CAAC;aACX,CAAC;AACF,iBAAK,EAAE,IAAI,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC;AACvB,sBAAM,EAAE,CAAC;AACT,oBAAI,EAAE,IAAI,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC;AACpB,yBAAK,EAAE,SAAS;iBACnB,CAAC;aACL,CAAC;SACL,CAAC;KACL,CAAC,CAAC;;;;;AAOH,QAAI,MAAM,GAAG,IAAI,EAAE,CAAC,WAAW,CAAC,MAAM,CAAC;AACnC,gBAAQ,EAAE,QAAQ;;;;AAIlB,uBAAe,EAAE,yBAAU,KAAK,EAAE;AAC9B,mBAAO,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,YAAY,CAAC,KAAK,CAAC,IACtC,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;SAClD;KACJ,CAAC,CAAC;;AAIH,WAAO;AACH,YAAI,EAAE,IAAI;AACV,uBAAe,EAAE,eAAe;AAChC,2BAAmB,EAAE,mBAAmB;KAC3C,CAAC;CAEL,CAAA,EAAG,CAAC","file":"mapDrawModule.js","sourcesContent":["//jslint browser: true\n//global document, ol\n\n/**\n * OL3 draw module.\n * @external OL3\n * @module\n * @returns {Object} Public functions and variables\n */\nvar mapDrawModule = (function () {\n    'use strict';\n\n    var draw;\n\n    var features = new ol.Collection();\n\n\n\n    /**\n     * Add the draw interaction to the map\n     * @public\n     * @param {Object} map - OL3 map\n     */\n    var init = function (map) {\n        featureOverlay.setMap(map);\n        map.addInteraction(modify);\n    };\n\n    \n    \n    /**\n     * Add a draw interaction to the map\n     * @public\n     * @param {string} type - Interaction type\n     * @param {Object} OL3 map\n     */\n    var drawInteraction = function (type, map) {\n        if (type) {\n            draw = new ol.interaction.Draw({\n                features: features,\n                type: /** @type {ol.geom.GeometryType} */ (type)\n            });\n            map.addInteraction(draw);\n        }\n    };\n\n\n\n    /**\n     * Let user change the geometry type.\n     * @public\n     * @param {string} id - Select input ID\n     * @param {Object} map - OL3 map\n     */\n    var addDrawTypeSwitcher = function (id, map) {\n        var typeSelect = document.getElementById(id);\n        typeSelect.onchange = function () {\n            map.removeInteraction(draw);\n            drawInteraction(typeSelect.value, map);\n        };\n        drawInteraction(typeSelect.value, map);\n    };\n\n\n\n    /**\n     * Features vector layer\n     */\n    var featureOverlay = new ol.layer.Vector({\n        source: new ol.source.Vector({\n            features: features\n        }),\n        style: new ol.style.Style({\n            fill: new ol.style.Fill({\n                color: 'rgba(255, 255, 255, 0.2)'\n            }),\n            stroke: new ol.style.Stroke({\n                color: '#ffcc33',\n                width: 2\n            }),\n            image: new ol.style.Circle({\n                radius: 7,\n                fill: new ol.style.Fill({\n                    color: '#ffcc33'\n                })\n            })\n        })\n    });\n\n\n\n    /**\n     * Modify interaction\n     */\n    var modify = new ol.interaction.Modify({\n        features: features,\n        // the SHIFT key must be pressed to delete vertices, so\n        // that new vertices can be drawn at the same position\n        // of existing vertices\n        deleteCondition: function (event) {\n            return ol.events.condition.shiftKeyOnly(event) &&\n                    ol.events.condition.singleClick(event);\n        }\n    });\n\n\n    \n    return {\n        init: init,\n        drawInteraction: drawInteraction,\n        addDrawTypeSwitcher: addDrawTypeSwitcher\n    };\n\n})();"]}